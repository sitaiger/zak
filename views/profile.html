<!DOCTYPE html>
<html>
  <head>
    <title>Profile</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Profile</h1>
      <p>Username: <span id="username"></span></p>
      <p>Email: <span id="email"></span></p>
      <a href="/">Главная</a> | <a href="/logout">Выход</a>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Получаем данные пользователя из скрипта с type="application/json"
        const userData = document.getElementById("user-data").textContent;
        const user = JSON.parse(userData);

        if (user) {
          // Обновляем содержимое страницы
          document.getElementById("username").innerText = user.username;
          document.getElementById("email").innerText = user.email;
        } else {
          // Перенаправляем на страницу входа
          window.location.href = "/login";
        }
      });
    </script>
    <script type="application/json" id="user-data">
      <%= JSON.stringify(user) %>
    </script>
  </body>
</html>
